---
layout: post
title: "Broadcom 4313 и Ubuntu 13.10"
date: 2014-04-07 17:10
comments: true
categories: ubuntu hardware patches drivers
---

Прикупил я с год назад ноут [Lenovo B590](http://market.yandex.ru/model-spec.xml?modelid=10451594&hid=91013) и
в целом все с ним нормально, за исключением проблем с Wi-Fi.

Стандартные драйвера от Ubuntu 13.04 встали нормально, но сеть не цеплял.
В то время рецептом была установка bcmwl-kernel-source более старой версии, от Ubuntu 12.04 (5.XX вместо последней 6.20).
Замечательно это все исправляло до примерно осени, когда обновилось ядро до 3.11 и совместимость с ним пропала.
Некоторое время просидел на текущем bcmwl-kernel-source благо он стал к тому времени получше работать, но
и с ним сигнал ловился плохо, и с некоторыми точками на стандарте 802.11n отказывался работать вообще.

Недавно это задрало и решил как-то это дело исправить. 
Выяснилось, что теперь можно поставить broadcom-sta-dkms (кажется, это тот самый старый драйвер, о котором упоминал раньше, но в
новой обертке), однако и он не собрался под новое ядро. На этот раз нашел к нему патч: http://www.mindwerks.net/wp-content/uploads/2013/10/wl_3.10.patch
Применяем его находясь примерно в `/usr/src/broadcom-sta-5.100.82.112`, делаем `dpkg-reconfigure broadcom-sta-dkms` и перегружаемся, и все работает замечательно (вместо перезагрузки можно выгрузить старый модуль, загрузить новый, но на тот момент у меня не хватило
 воли сделать это правильно).

Вероятно, в новых версиях ядра все снова отвалится, будем решать этот вопрос снова.

Как вариант, можно поменять сетевуху на одну из следующих:

 * WLAN, Non-Intel 1x1 11bgn + BT4.0 Combo, Broadcom 4313 + 20702 20200100, 20200101
 * WLAN, Non-Intel 2x2 11abgn + BT4.0 Combo, Broadcom 43228 + 20702 20200098, 20200099
 * WLAN, Intel 2x2 11bgn + BT4.0 Combo, Jackson Peak 1 20200078 (это что-то типа INTEL 2230 WIRELESS-N WIFI MINICARD LC 20200078 4W3765)
 * WLAN, Non-Intel 1x1 11bgn, Broadcom BCM4313 1x1 BGN MOW 20200102
 * WLAN, Non-Intel 1x1 11bgn, Realtek bgn 1x1 HMC WLAN Stockton 20200016 (это скорее всего Realtek 8188 или что-то подобное)

Из этих нас, очевидно интересуют Intel и Realtek. Intel стоит 1-1.5тыр в юлмарте, Realtek можно попробовать наковырять в Алтыне за 500р.

Для использования остальных железок пишут, что придется перепрошивать биос. Скорее всего, это не сложно.
